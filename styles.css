:root{
  --bg: #f7f7f8;
  --panel: #ffffff;
  --text: #111827;
  --muted: #6b7280;
  --primary: #111827;
  --accent: #10b981;
  --line: #e5e7eb;
  --rail: #0f172a;
  --shadow: 0 1px 2px rgba(0,0,0,.06), 0 8px 24px rgba(0,0,0,.06);
  --radius: 14px;
  --bubble-in: #ffffff;
  --bubble-out: #111827;
  --bubble-out-text: #ffffff;
}

*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0;
  background: var(--bg);
  color: var(--text);
  font: 14px/1.45 "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* App grid: rail | sidebar | main | utility */
.app-grid{
  display:grid;
  grid-template-columns: 64px 320px 1fr 56px;
  grid-template-rows: 100vh;
}

/* Left thin rail */
.rail{
  background: var(--rail);
  color: #fff;
  padding: 12px 8px;
  display:flex; flex-direction: column; align-items:center; gap:12px;
}
.rail__logo{
  width:36px;height:36px;border-radius:10px;
  display:grid;place-items:center;
  background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
  color:#072f26;
  margin-bottom: 8px;
  box-shadow: var(--shadow);
}
.icon{ width:22px;height:22px; display:block }
.rail__nav{ display:flex; flex-direction:column; gap:6px; margin-top:6px }
.rail__btn{
  width:40px;height:40px;border-radius:12px;border:0;background:transparent; color:#cbd5e1; cursor:pointer;
  display:grid;place-items:center;
}
.rail__btn:hover{ background: rgba(255,255,255,.08); color:#fff }
.rail__btn.is-active{ background:#0ea5e9; color:#00131c }
.rail__footer{ margin-top:auto }

/* Sidebar */
.sidebar{
  background: var(--panel);
  border-right: 1px solid var(--line);
  padding: 16px;
  display:flex; flex-direction: column;
}
.sidebar__header{
  display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom: 16px;
}
.sidebar__header h1{ font-size: 22px; font-weight: 700; margin:0 }
.btn{
  height:36px; padding:0 14px; border-radius:10px; border:1px solid var(--line);
  background:#fff; color:var(--text); cursor:pointer; font-weight:600;
}
.btn:hover{ background:#f3f4f6 }
.btn-primary{ background:#111827; color:#fff; border-color:#111827 }
.btn-primary:hover{ background:#0b1220 }

.sidebar__search{ position: relative; display:flex; gap:8px; margin-bottom: 14px }
.sidebar__search input{
  flex:1; height:36px; border-radius:10px; border:1px solid var(--line);
  padding:0 12px; outline:none; background:#fafafa;
}
.filter-btn{
  width:36px; height:36px; border-radius:10px; border:1px solid var(--line);
  background:#fff; cursor:pointer; display:grid; place-items:center;
}
.sidebar__section{
  font-size: 11px; letter-spacing:.12em; color:var(--muted); margin:10px 0 8px;
}
.chat-list{ list-style:none; padding:0; margin:0; overflow:auto }
.chat-item{ display:flex; gap:12px; padding:10px 8px; border-radius:12px; cursor:pointer; align-items:flex-start }
.chat-item:hover{ background:#f6f7f9 }
.avatar{
  position:relative; width:36px;height:36px;border-radius:10px; background:#111827; color:#fff;
  font-weight:700; display:grid; place-items:center; letter-spacing:.02em; box-shadow: var(--shadow);
}
.avatar.big{ width:40px;height:40px; border-radius:12px }
.avatar.group{ background:#334155 }
.chat-item.is-online .avatar::after,
.chat-item.is-idle .avatar::after{
  content:""; position:absolute; right:-1px; bottom:-1px; width:10px;height:10px; border-radius:50%;
  background:#22c55e; box-shadow:0 0 0 2px #fff;
}
.chat-item.is-typing .snippet{ color:#0ea5e9; font-weight:600 }
.chat-item__main{ flex:1; min-width:0 }
.chat-item .row{ display:flex; align-items:center; gap:8px }
.chat-item .row:first-child{ justify-content: space-between; margin-bottom: 2px }
.name{ font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
.time{ color:var(--muted); font-size:12px }
.snippet{ color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; flex:1 }
.row.icons .faces{ opacity:.7; margin-right:6px }

/* Main chat area */
.main{
  background: var(--bg);
  display:grid;
  grid-template-rows: auto 1fr auto; /* header | messages | composer */
}

/* Header */
.chat-header{
  background:#fff;
  border-bottom:1px solid var(--line);
  padding: 12px 18px;
  display:flex; align-items:center; justify-content:space-between;
}
.chat-peer{ display:flex; align-items:center; gap:12px }
.peer-meta{ display:flex; flex-direction:column }
.peer-name{ font-weight:700 }
.peer-status{ color:var(--muted); font-size:12px }
.chat-actions .ghost{
  border:1px solid var(--line); background:#fff; height:32px; padding:0 12px; border-radius:10px; cursor:pointer;
}
.chat-actions .ghost:hover{ background:#f3f4f6 }

/* Messages list with bubbles */
.messages{
  padding: 18px;
  overflow:auto;
  background: linear-gradient(180deg, #f7f7f8 0%, #f9fafb 100%);
}
.divider{
  margin: 8px 0 16px;
  text-align:center;
  position: relative;
}
.divider span{
  background: #eaecef;
  color:#6b7280;
  font-size: 11px;
  padding: 3px 10px;
  border-radius: 999px;
  display:inline-block;
}

/* Bubble rows */
.bubble-row{
  display:grid;
  grid-template-columns: 40px minmax(0, 1fr);
  gap:10px;
  align-items:flex-end;
  margin-bottom: 10px;
}
.bubble-row.me{
  grid-template-columns: minmax(0, 1fr) 40px;
}
.bubble-avatar{
  width:32px;height:32px;border-radius:50%;
  object-fit:cover; box-shadow: var(--shadow);
}
.bubble{
  max-width: 62%;
  padding: 10px 12px;
  border-radius: 14px;
  box-shadow: var(--shadow);
  display:inline-flex; flex-direction:column; gap:6px;
}
.bubble-in{
  background: var(--bubble-in);
  color: var(--text);
  border-top-left-radius: 6px;
}
.bubble-out{
  background: var(--bubble-out);
  color: var(--bubble-out-text);
  border-top-right-radius: 6px;
  margin-left:auto;
}
.bubble-text{ white-space:pre-wrap; word-wrap:break-word }
.bubble-meta{
  font-size: 11px;
  opacity: .7;
  display:flex; gap:6px; align-items:center;
}
.file-pill{
  display:inline-block;
  align-self:flex-start;
  font-size:12px;
  padding:6px 10px;
  border-radius:10px;
  border:1px solid var(--line);
  color:var(--text);
  background:#fff;
  text-decoration:none;
}
.me .bubble{ justify-self:end }     /* ensure right alignment for outgoing rows */

/* Composer */
.composer{
  background:#fff; border-top:1px solid var(--line);
  padding: 10px 12px; display:flex; align-items:center; gap:10px;
}
.composer .tool{
  width:38px;height:38px;border-radius:10px;border:1px solid var(--line);
  background:#fff; display:grid; place-items:center; cursor:pointer;
}
.composer .tool:hover{ background:#f3f4f6 }
.input{
  flex:1; height:40px; border-radius:12px; border:1px solid var(--line); padding:0 12px; background:#fafafa; outline:none;
}
.btn-send{
  height:38px; padding:0 16px; border-radius:10px; border:0; cursor:pointer;
  background:#111827; color:#fff; font-weight:600;
}
.btn-send:hover{ background:#0b1220 }

/* Right utilities rail */
.utility-rail{
  background: var(--panel);
  border-left: 1px solid var(--line);
  display:flex; flex-direction:column; align-items:center; gap:10px; padding:10px 8px;
}
.util-btn{
  width:40px;height:40px;border-radius:12px;border:0;background:#fff; cursor:pointer;
  display:grid; place-items:center; color:#111827; box-shadow: var(--shadow);
}
.util-btn:hover{ transform: translateY(-1px); }

/* Nice scrollbars */
.messages, .chat-list{ scrollbar-width: thin; scrollbar-color: #cbd5e1 transparent }
.messages::-webkit-scrollbar, .chat-list::-webkit-scrollbar{ width:8px }
.messages::-webkit-scrollbar-thumb, .chat-list::-webkit-scrollbar-thumb{ background:#cbd5e1; border-radius:8px }

/* Responsive */
@media (max-width: 1200px){
  .app-grid{ grid-template-columns: 56px 280px 1fr 0 }
  .utility-rail{ display:none }
}
@media (max-width: 900px){
  .app-grid{ grid-template-columns: 56px 1fr }
  .sidebar{ display:none } /* hide chat list on small screens (toggle with JS later) */
}
